<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="무료로 다양한 콘텐츠 유형의 QR 코드를 쉽고 빠르게 생성하세요. URL, 텍스트, 연락처, 이메일 등을 QR 코드로 변환할 수 있습니다.">
    <meta name="keywords" content="QR 코드 생성, QR 코드 만들기, 무료 QR 코드, URL QR 코드, 이메일 QR 코드, 연락처 QR 코드">
    <title>QR 코드 생성 - FileToQR</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/components/qr-generator.css">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* QR 코드 프리뷰 스타일 */
        .qr-preview-container {
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            aspect-ratio: 1 / 1;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
            overflow: hidden;
        }
        
        /* 컬러 픽커 스타일 */
        .color-picker {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            border: 1px solid #ddd;
            overflow: hidden;
            cursor: pointer;
        }
        
        .color-picker input[type="color"] {
            border: 0;
            padding: 0;
            width: 150%;
            height: 150%;
            transform: translate(-10%, -10%);
            cursor: pointer;
        }
        
        /* 로고 미리보기 스타일 */
        .logo-preview {
            width: 60px;
            height: 60px;
            border-radius: 4px;
            border: 1px solid #ddd;
            object-fit: contain;
            background-color: #fff;
        }
        
        /* 입력 타입 전환 탭 스타일 */
        .content-type-tabs {
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 1rem;
        }
        
        .content-type-tabs button {
            padding: 0.5rem 1rem;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-right: 0.5rem;
        }
        
        .content-type-tabs button.active {
            border-bottom: 2px solid #3B82F6;
            color: #3B82F6;
        }
        
        /* 숨김 및 표시 클래스 */
        .hidden {
            display: none;
        }
        
        .active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col">
    <!-- 헤더 컴포넌트 -->
    <div id="header-container"></div>

    <!-- 헤더 배너 광고 -->
    <div id="ad-header" class="ad-container my-4 text-center">
        <div class="ad-label text-xs text-gray-500">광고</div>
        <div class="ad-slot">
            <!-- Google AdSense 헤더 광고 코드 삽입 위치 -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                data-ad-slot="XXXXXXXXXX"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <main class="flex-grow container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6">QR 코드 생성</h1>
        
        <div class="grid md:grid-cols-2 gap-8">
            <!-- 왼쪽 열: QR 코드 설정 -->
            <div>
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4">QR 코드 콘텐츠</h2>
                    
                    <!-- 콘텐츠 유형 선택 탭 -->
                    <div class="content-type-tabs mb-4" id="content-type-tabs">
                        <button class="active" data-type="url">URL</button>
                        <button data-type="text">텍스트</button>
                        <button data-type="email">이메일</button>
                        <button data-type="phone">전화번호</button>
                        <button data-type="vcard">연락처</button>
                        <button data-type="wifi">WiFi</button>
                        <button data-type="file">파일</button>
                    </div>
                    
                    <!-- URL 입력 폼 (기본값) -->
                    <div class="content-form active" id="url-form">
                        <div class="mb-4">
                            <label for="url-input" class="block text-sm font-medium text-gray-700 mb-1">웹사이트 주소</label>
                            <input type="url" id="url-input" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://example.com">
                            <p class="text-xs text-gray-500 mt-1">예: https://filetoqr.com</p>
                        </div>
                    </div>
                    
                    <!-- 텍스트 입력 폼 -->
                    <div class="content-form hidden" id="text-form">
                        <div class="mb-4">
                            <label for="text-input" class="block text-sm font-medium text-gray-700 mb-1">텍스트</label>
                            <textarea id="text-input" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="4" placeholder="내용을 입력하세요"></textarea>
                            <p class="text-xs text-gray-500 mt-1">최대 7,089자의 숫자 또는 4,296자의 영숫자를 입력할 수 있습니다.</p>
                        </div>
                    </div>
                    
                    <!-- 이메일 입력 폼 -->
                    <div class="content-form hidden" id="email-form">
                        <div class="mb-4">
                            <label for="email-address" class="block text-sm font-medium text-gray-700 mb-1">이메일 주소</label>
                            <input type="email" id="email-address" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="example@example.com">
                        </div>
                        <div class="mb-4">
                            <label for="email-subject" class="block text-sm font-medium text-gray-700 mb-1">제목 (선택사항)</label>
                            <input type="text" id="email-subject" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="이메일 제목">
                        </div>
                        <div class="mb-4">
                            <label for="email-body" class="block text-sm font-medium text-gray-700 mb-1">내용 (선택사항)</label>
                            <textarea id="email-body" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" placeholder="이메일 내용"></textarea>
                        </div>
                    </div>
                    
                    <!-- 전화번호 입력 폼 -->
                    <div class="content-form hidden" id="phone-form">
                        <div class="mb-4">
                            <label for="phone-input" class="block text-sm font-medium text-gray-700 mb-1">전화번호</label>
                            <input type="tel" id="phone-input" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="+82 10-1234-5678">
                            <p class="text-xs text-gray-500 mt-1">국가 코드와 함께 입력하세요. 예: +82 10-1234-5678</p>
                        </div>
                    </div>
                    
                    <!-- vCard 입력 폼 -->
                    <div class="content-form hidden" id="vcard-form">
                        <div class="mb-4">
                            <label for="vcard-name" class="block text-sm font-medium text-gray-700 mb-1">이름</label>
                            <input type="text" id="vcard-name" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="홍길동">
                        </div>
                        <div class="mb-4">
                            <label for="vcard-org" class="block text-sm font-medium text-gray-700 mb-1">회사/조직 (선택사항)</label>
                            <input type="text" id="vcard-org" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="ABC 회사">
                        </div>
                        <div class="mb-4">
                            <label for="vcard-title" class="block text-sm font-medium text-gray-700 mb-1">직함 (선택사항)</label>
                            <input type="text" id="vcard-title" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="매니저">
                        </div>
                        <div class="mb-4">
                            <label for="vcard-phone" class="block text-sm font-medium text-gray-700 mb-1">전화번호</label>
                            <input type="tel" id="vcard-phone" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="+82 10-1234-5678">
                        </div>
                        <div class="mb-4">
                            <label for="vcard-email" class="block text-sm font-medium text-gray-700 mb-1">이메일</label>
                            <input type="email" id="vcard-email" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="example@example.com">
                        </div>
                        <div class="mb-4">
                            <label for="vcard-website" class="block text-sm font-medium text-gray-700 mb-1">웹사이트 (선택사항)</label>
                            <input type="url" id="vcard-website" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://example.com">
                        </div>
                        <div class="mb-4">
                            <label for="vcard-address" class="block text-sm font-medium text-gray-700 mb-1">주소 (선택사항)</label>
                            <textarea id="vcard-address" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="2" placeholder="서울시 강남구 테헤란로 123"></textarea>
                        </div>
                    </div>
                    
                    <!-- WiFi 입력 폼 -->
                    <div class="content-form hidden" id="wifi-form">
                        <div class="mb-4">
                            <label for="wifi-ssid" class="block text-sm font-medium text-gray-700 mb-1">WiFi 이름 (SSID)</label>
                            <input type="text" id="wifi-ssid" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="WiFi 네트워크 이름">
                        </div>
                        <div class="mb-4">
                            <label for="wifi-encryption" class="block text-sm font-medium text-gray-700 mb-1">암호화 유형</label>
                            <select id="wifi-encryption" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="WPA">WPA/WPA2/WPA3</option>
                                <option value="WEP">WEP</option>
                                <option value="nopass">암호 없음</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="wifi-password" class="block text-sm font-medium text-gray-700 mb-1">비밀번호</label>
                            <input type="password" id="wifi-password" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="WiFi 비밀번호">
                        </div>
                        <div class="flex items-center mb-4">
                            <input type="checkbox" id="wifi-hidden" class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="wifi-hidden" class="ml-2 block text-sm text-gray-700">숨겨진 네트워크</label>
                        </div>
                    </div>

                    <!-- 파일 입력 폼 -->
                    <div class="content-form hidden" id="file-form">
                        <div class="mb-4">
                            <label for="file-input" class="block text-sm font-medium text-gray-700 mb-1">파일 선택</label>
                            <input type="file" id="file-input" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <p class="text-xs text-gray-500 mt-1">5MB 이하의 파일만 QR 코드로 변환이 가능합니다.</p>
                        </div>
                        <div class="file-info p-4 border rounded-md mb-4 hidden">
                            <h3 class="font-medium mb-2">파일 정보</h3>
                            <div class="grid grid-cols-2 gap-2 text-sm">
                                <div class="text-gray-600">파일명:</div>
                                <div class="file-name font-medium"></div>
                                <div class="text-gray-600">파일 유형:</div>
                                <div class="file-type font-medium"></div>
                                <div class="text-gray-600">파일 크기:</div>
                                <div class="file-size font-medium"></div>
                            </div>
                        </div>
                        <div class="alert alert-warning p-3 bg-yellow-50 text-yellow-800 rounded-md text-sm">
                            <p>QR 코드로 변환된 파일은 크기 제한으로 인해 작은 파일에 적합합니다. 큰 파일은 여러 QR 코드로 나누어집니다.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4">QR 코드 설정</h2>
                    
                    <!-- QR 코드 설정 옵션 -->
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">전경색</label>
                            <div class="color-picker">
                                <input type="color" id="foreground-color" value="#000000">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">배경색</label>
                            <div class="color-picker">
                                <input type="color" id="background-color" value="#FFFFFF">
                            </div>
                        </div>
                        
                        <div>
                            <label for="error-correction" class="block text-sm font-medium text-gray-700 mb-1">오류 수정 수준</label>
                            <select id="error-correction" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="L">낮음 (7%)</option>
                                <option value="M" selected>중간 (15%)</option>
                                <option value="Q">높음 (25%)</option>
                                <option value="H">매우 높음 (30%)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="qr-size" class="block text-sm font-medium text-gray-700 mb-1">QR 코드 크기</label>
                            <select id="qr-size" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="128">작게 (128x128px)</option>
                                <option value="256" selected>중간 (256x256px)</option>
                                <option value="512">크게 (512x512px)</option>
                                <option value="1024">매우 크게 (1024x1024px)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <label for="margin" class="block text-sm font-medium text-gray-700 mb-1">여백</label>
                        <input type="range" id="margin" min="0" max="5" value="1" class="w-full">
                        <div class="flex justify-between text-xs text-gray-500">
                            <span>0</span>
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <div class="flex items-center mb-2">
                            <input type="checkbox" id="add-logo" class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="add-logo" class="ml-2 block text-sm font-medium text-gray-700">로고 추가</label>
                        </div>
                        <div id="logo-options" class="mt-2 hidden">
                            <div class="flex items-center space-x-4">
                                <div>
                                    <label for="logo-file" class="block text-sm font-medium text-gray-700 mb-1">로고 이미지</label>
                                    <input type="file" id="logo-file" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept="image/*">
                                </div>
                                <div>
                                    <img id="logo-preview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 24 24' fill='none' stroke='%23ccc' stroke-width='1' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Ccircle cx='8.5' cy='8.5' r='1.5'%3E%3C/circle%3E%3Cpolyline points='21 15 16 10 5 21'%3E%3C/polyline%3E%3C/svg%3E" alt="로고 미리보기" class="logo-preview">
                                </div>
                            </div>
                            <div class="mt-2">
                                <label for="logo-size" class="block text-sm font-medium text-gray-700 mb-1">로고 크기</label>
                                <input type="range" id="logo-size" min="5" max="30" value="15" class="w-full">
                                <div class="flex justify-between text-xs text-gray-500">
                                    <span>작게</span>
                                    <span>크게</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button id="generate-qr" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium">QR 코드 생성</button>
                    </div>
                </div>
            </div>
            
            <!-- 오른쪽 열: QR 코드 미리보기 및 다운로드 -->
            <div>
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4">QR 코드 미리보기</h2>
                    
                    <div class="qr-preview-container mb-6" id="qr-preview">
                        <div class="text-center text-gray-500">
                            <svg class="w-16 h-16 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                            </svg>
                            <p>QR 코드를 생성하면 여기에 표시됩니다.</p>
                        </div>
                    </div>
                    
                    <div class="space-y-4" id="download-options" style="display: none;">
                        <h3 class="text-lg font-semibold">다운로드</h3>
                        
                        <div class="grid grid-cols-3 gap-4">
                            <button class="flex flex-col items-center justify-center p-4 border rounded-md hover:bg-gray-50" id="download-png">
                                <svg class="w-8 h-8 text-gray-700 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span class="text-sm">PNG</span>
                            </button>
                            
                            <button class="flex flex-col items-center justify-center p-4 border rounded-md hover:bg-gray-50" id="download-svg">
                                <svg class="w-8 h-8 text-gray-700 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                                </svg>
                                <span class="text-sm">SVG</span>
                            </button>
                            
                            <button class="flex flex-col items-center justify-center p-4 border rounded-md hover:bg-gray-50" id="download-jpeg">
                                <svg class="w-8 h-8 text-gray-700 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span class="text-sm">JPEG</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 콘텐츠 중간 광고 -->
                <div id="ad-content" class="ad-container mb-6 text-center">
                    <div class="ad-label text-xs text-gray-500">광고</div>
                    <div class="ad-slot">
                        <!-- Google AdSense 콘텐츠 내 광고 코드 삽입 위치 -->
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                            data-ad-slot="XXXXXXXXXX"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4">QR 코드 활용 팁</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-medium text-blue-600">스캔하기 쉬운 QR 코드 만들기</h3>
                            <p class="text-gray-600 text-sm mt-1">QR 코드와 배경색 사이에 충분한 대비를 두고, 오류 수정 수준을 '높음'으로 설정하면 스캔 성공률이 높아집니다.</p>
                        </div>
                        
                        <div>
                            <h3 class="font-medium text-blue-600">로고를 넣을 때 주의할 점</h3>
                            <p class="text-gray-600 text-sm mt-1">로고를 추가할 때는 QR 코드 중앙 부분만 사용하고, 오류 수정 수준을 '높음' 또는 '매우 높음'으로 설정하세요.</p>
                        </div>
                        
                        <div>
                            <h3 class="font-medium text-blue-600">인쇄용 QR 코드</h3>
                            <p class="text-gray-600 text-sm mt-1">인쇄물에 사용할 QR 코드는 SVG 형식으로 다운로드하면 크기를 조정해도 품질이 유지됩니다.</p>
                        </div>
                        
                        <div>
                            <h3 class="font-medium text-blue-600">QR 코드 테스트</h3>
                            <p class="text-gray-600 text-sm mt-1">사용하기 전에 여러 기기와 스캐너 앱에서 테스트하여 정상적으로 인식되는지 확인하세요.</p>
                        </div>
                    </div>
                </div>

                <!-- QR 코드 스캔 탭 -->
                <div class="content-form hidden" id="scanner-panel">
                    <div class="scanner-tabs mb-4 border-b">
                        <button class="scanner-tab active px-4 py-2 font-medium" data-panel="camera-scan-panel">카메라로 스캔</button>
                        <button class="scanner-tab px-4 py-2 font-medium" data-panel="image-scan-panel">이미지에서 스캔</button>
                    </div>
                    
                    <div id="scanner-container" class="relative mb-4">
                        <div id="loading-message" class="absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-700">
                            ⌛ 카메라 로딩 중...
                        </div>
                        
                        <!-- 카메라 스캔 패널 -->
                        <div id="camera-scan-panel" class="scanner-panel">
                            <canvas id="scanner-canvas" class="w-full"></canvas>
                        </div>
                        
                        <!-- 이미지 스캔 패널 -->
                        <div id="image-scan-panel" class="scanner-panel hidden">
                            <div class="mb-4">
                                <label for="qr-image-input" class="block text-sm font-medium text-gray-700 mb-1">QR 코드 이미지 선택</label>
                                <input type="file" id="qr-image-input" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept="image/*">
                            </div>
                            
                            <div id="image-preview" class="mb-4 hidden">
                                <img id="preview-image" class="max-w-full h-auto border rounded-md" src="" alt="QR 코드 미리보기">
                            </div>
                            
                            <button id="scan-image" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">이미지에서 QR 코드 읽기</button>
                        </div>
                    </div>
                    
                    <!-- 파일 복원 UI -->
                    <div id="file-recovery-ui" class="hidden mb-6 p-4 bg-blue-50 rounded-md border border-blue-200">
                        <h3 class="text-lg font-semibold mb-2">파일 복원 모드</h3>
                        <p class="text-sm mb-4">QR 코드를 스캔하여 원본 파일을 복원하세요. 먼저 메타데이터 QR 코드를 스캔한 다음 나머지 청크를 순서대로 스캔하세요.</p>
                        
                        <div class="mb-4">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium">복원 진행 상황</span>
                                <span id="recovery-summary" class="text-sm">메타데이터 QR 코드를 먼저 스캔하세요.</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="recovery-progress-bar" class="bg-blue-600 h-3 rounded-full" style="width: 0%"></div>
                            </div>
                            <p id="recovery-progress-text" class="text-xs text-gray-500 mt-1">복원 준비 중...</p>
                        </div>
                        
                        <!-- 메타데이터 섹션 -->
                        <div id="recovery-metadata-section" class="hidden mb-4 p-3 bg-white rounded-md border border-gray-200">
                            <h4 class="text-sm font-medium mb-2">파일 정보</h4>
                            <div class="text-sm grid grid-cols-2 gap-2">
                                <div>
                                    <span class="text-gray-500">파일명:</span>
                                    <span id="recovery-filename" class="font-medium ml-1">-</span>
                                </div>
                                <div>
                                    <span class="text-gray-500">크기:</span>
                                    <span id="recovery-filesize" class="font-medium ml-1">-</span>
                                </div>
                                <div>
                                    <span class="text-gray-500">유형:</span>
                                    <span id="recovery-filetype" class="font-medium ml-1">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="recovery-complete-message" class="hidden mb-4 p-3 bg-green-50 text-green-800 rounded-md border border-green-200">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span class="font-medium">모든 QR 코드가 스캔되었습니다! 파일을 다운로드할 수 있습니다.</span>
                            </div>
                        </div>
                        
                        <div class="flex space-x-2">
                            <button id="reset-recovery" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded-md text-sm">다시 시작</button>
                            <button id="download-file" class="bg-gray-400 text-white px-3 py-2 rounded-md text-sm" disabled>파일 다운로드</button>
                        </div>
                    </div>
                    
                    <!-- 스캔 결과 -->
                    <div id="scan-result" class="hidden">
                        <h3 class="text-lg font-semibold mb-2">스캔 결과</h3>
                        
                        <div class="mb-4">
                            <div class="flex items-center mb-1">
                                <span class="text-gray-700 font-medium">타입:</span>
                                <span id="result-type" class="ml-2">텍스트</span>
                            </div>
                            
                            <div class="p-4 bg-gray-50 rounded-md border">
                                <pre id="result-content" class="text-sm whitespace-pre-wrap break-all"></pre>
                            </div>
                        </div>
                        
                        <div class="flex space-x-4">
                            <button id="copy-result" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">클립보드에 복사</button>
                            <a id="result-action" href="#" target="_blank" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">열기</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 푸터 광고 -->
    <div id="ad-footer" class="ad-container my-4 text-center">
        <div class="ad-label text-xs text-gray-500">광고</div>
        <div class="ad-slot">
            <!-- Google AdSense 푸터 광고 코드 삽입 위치 -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                data-ad-slot="XXXXXXXXXX"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <!-- 푸터 컴포넌트 -->
    <div id="footer-container"></div>

    <!-- Core Scripts -->
    <script src="assets/js/core/app-core.js" type="module"></script>
    
    <!-- QR 코드 라이브러리 (CDN에서 백업) -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <!-- 파일 유틸리티 모듈 -->
    <script src="assets/js/utils/file-utils.js" type="module"></script>
    <script src="assets/js/core/qr-core.js" type="module"></script>
    <script src="assets/js/utils/debug-helper.js" type="module"></script>
    
    <!-- QR 코드 생성기 초기화 스크립트 -->
    <script type="module">
        // 디버그 모드 활성화
        const activateDebugMode = async () => {
            try {
                const debugModule = await import('./assets/js/utils/debug-helper.js');
                const DebugHelper = debugModule.default;
                DebugHelper.setDebugMode(true);
                console.log('디버그 모드가 활성화되었습니다.');
                return DebugHelper;
            } catch (error) {
                console.error('디버그 모드 활성화 실패:', error);
                return null;
            }
        };

        // QR 코드 생성기 초기화 - 여러 경로 시도
        const initQRGenerator = async () => {
            // 모듈을 로드할 여러 경로 시도
            const paths = [
                './assets/js/qr-generator/qr-generator.js',
                '/assets/js/qr-generator/qr-generator.js',
                '../qr-generator/qr-generator.js',
                'assets/js/qr-generator/qr-generator.js'
            ];
            
            let QRGenerator = null;
            let lastError = null;
            
            // 각 경로 시도
            for (const path of paths) {
                try {
                    console.log(`QR 생성기 모듈 로드 시도 (경로: ${path})`);
                    const module = await import(path);
                    if (module && module.default) {
                        QRGenerator = module.default;
                        console.log('QR 생성기 모듈 로드 성공');
                        break;
                    }
                } catch (error) {
                    console.warn(`경로 ${path}에서 모듈 로드 실패:`, error);
                    lastError = error;
                }
            }
            
            if (!QRGenerator) {
                console.error('모든 경로에서 QR 생성기 로드 실패:', lastError);
                // 폴백: 기본 QR 생성 인터페이스 사용
                setupBasicQRInterface();
                return null;
            }
            
            try {
                console.log('QR 생성기 초기화 중...');
                await QRGenerator.init();
                console.log('QR 생성기 초기화 완료');
                
                // 생성 버튼에 이벤트 리스너 추가
                const generateBtn = document.getElementById('generate-qr');
                if (generateBtn) {
                    generateBtn.addEventListener('click', () => {
                        console.log('QR 코드 생성 버튼 클릭됨');
                        QRGenerator.generateQRCode();
                    });
                }
                
                // 다운로드 버튼 이벤트 리스너
                const downloadPngBtn = document.getElementById('download-png');
                const downloadSvgBtn = document.getElementById('download-svg');
                
                if (downloadPngBtn) {
                    downloadPngBtn.addEventListener('click', () => {
                        QRGenerator.downloadQRCode('png');
                    });
                }
                
                if (downloadSvgBtn) {
                    downloadSvgBtn.addEventListener('click', () => {
                        QRGenerator.downloadQRCode('svg');
                    });
                }
                
                return QRGenerator;
            } catch (error) {
                console.error('QR 생성기 초기화 실패:', error);
                // 폴백: 기본 QR 생성 인터페이스 사용
                setupBasicQRInterface();
                return null;
            }
        };
        
        // 기본 QR 생성 인터페이스 설정 (모듈 없이도 작동)
        function setupBasicQRInterface() {
            console.log('기본 QR 생성 인터페이스 설정 중...');
            
            // 생성 버튼에 이벤트 리스너 추가
            const generateBtn = document.getElementById('generate-qr');
            if (generateBtn) {
                generateBtn.addEventListener('click', () => {
                    console.log('QR 코드 생성 버튼 클릭됨 (기본 인터페이스)');
                    generateBasicQRCode();
                });
            }
        }
        
        // 기본 QR 코드 생성 함수
        function generateBasicQRCode() {
            // 폼에서 데이터 가져오기
            const contentInput = document.getElementById('qr-content');
            const content = contentInput?.value.trim() || '';
            
            if (!content) {
                alert('QR 코드에 포함할 내용을 입력해주세요.');
                return;
            }
            
            // QR 라이브러리 사용 가능 여부 확인
            if (typeof QRCode === 'undefined') {
                alert('QR 코드 생성 라이브러리를 로드할 수 없습니다.');
                return;
            }
            
            // 기존 QR 코드 제거
            const previewContainer = document.getElementById('qr-preview');
            previewContainer.innerHTML = '';
            
            try {
                // QR 코드 생성
                new QRCode(previewContainer, {
                    text: content,
                    width: 256,
                    height: 256,
                    colorDark: '#000000',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.H
                });
                
                // 다운로드 옵션 표시
                const downloadOptions = document.getElementById('download-options');
                if (downloadOptions) {
                    downloadOptions.style.display = 'block';
                }
                
                // 다운로드 버튼 이벤트 리스너
                setupBasicDownloadButtons(previewContainer);
            } catch (error) {
                console.error('QR 코드 생성 실패:', error);
                previewContainer.innerHTML = `
                    <div class="p-4 bg-red-100 rounded-lg text-red-800">
                        <h3 class="font-medium">QR 코드 생성 실패</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        // 기본 다운로드 버튼 설정
        function setupBasicDownloadButtons(container) {
            const downloadPngBtn = document.getElementById('download-png');
            
            if (downloadPngBtn) {
                downloadPngBtn.addEventListener('click', () => {
                    // 캔버스 찾기
                    const canvas = container.querySelector('canvas');
                    if (!canvas) {
                        alert('다운로드할 QR 코드를 찾을 수 없습니다.');
                        return;
                    }
                    
                    // PNG 다운로드
                    const dataUrl = canvas.toDataURL('image/png');
                    const downloadLink = document.createElement('a');
                    downloadLink.href = dataUrl;
                    downloadLink.download = `qrcode_${new Date().getTime()}.png`;
                    document.body.appendChild(downloadLink);
                    downloadLink.click();
                    document.body.removeChild(downloadLink);
                });
            }
        }
        
        // DOM이 로드된 후 초기화
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('QR 코드 생성 페이지 초기화 시작');
            
            // 디버그 모드 활성화
            await activateDebugMode();
            
            // URL에서 파라미터 가져오기
            const urlParams = new URLSearchParams(window.location.search);
            const initialContent = urlParams.get('content');
            
            // 초기 콘텐츠가 있으면 입력 필드에 채우기
            if (initialContent) {
                const contentInput = document.getElementById('qr-content');
                if (contentInput) {
                    contentInput.value = initialContent;
                    console.log('URL에서 초기 콘텐츠 설정:', initialContent);
                }
            }
            
            // QR 생성기 초기화
            const QRGenerator = await initQRGenerator();
            
            // URL 파라미터에 내용이 있고 모듈이 로드되었으면 자동 생성
            if (initialContent && QRGenerator) {
                setTimeout(() => {
                    console.log('URL 파라미터가 있어 자동으로 QR 코드 생성');
                    QRGenerator.generateQRCode();
                }, 500);
            } else if (initialContent) {
                // 모듈이 로드되지 않았지만 URL 파라미터가 있는 경우
                setTimeout(generateBasicQRCode, 500);
            }
        });
    </script>

    <!-- 이벤트 추적 스크립트 -->
    <script type="module">
        // 콘텐츠 유형 탭 전환 처리
        document.addEventListener('DOMContentLoaded', function() {
            const contentTypeTabs = document.querySelectorAll('#content-type-tabs button');
            const contentForms = document.querySelectorAll('.content-form');
            
            contentTypeTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 모든 탭에서 active 클래스 제거
                    contentTypeTabs.forEach(t => t.classList.remove('active'));
                    // 클릭한 탭에 active 클래스 추가
                    this.classList.add('active');
                    
                    // 모든 폼 숨기기
                    contentForms.forEach(form => form.classList.add('hidden'));
                    contentForms.forEach(form => form.classList.remove('active'));
                    
                    // 선택한 폼 표시
                    const selectedForm = document.getElementById(`${this.dataset.type}-form`);
                    selectedForm.classList.remove('hidden');
                    selectedForm.classList.add('active');
                });
            });
            
            // 로고 옵션 표시/숨김 처리
            const addLogoCheckbox = document.getElementById('add-logo');
            const logoOptions = document.getElementById('logo-options');
            
            addLogoCheckbox?.addEventListener('change', function() {
                if (this.checked) {
                    logoOptions.classList.remove('hidden');
                } else {
                    logoOptions.classList.add('hidden');
                }
            });
        });
    </script>

    <!-- 필요한 폴리필 및 글로벌 객체 정의 -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 파일 선택 이벤트 리스너 추가
        const fileInput = document.getElementById('file-input');
        if (fileInput) {
            fileInput.addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    const fileInfoEl = document.querySelector('.file-info');
                    const fileNameEl = document.querySelector('.file-name');
                    const fileTypeEl = document.querySelector('.file-type');
                    const fileSizeEl = document.querySelector('.file-size');
                    
                    if (fileInfoEl) fileInfoEl.classList.remove('hidden');
                    if (fileNameEl) fileNameEl.textContent = file.name;
                    if (fileTypeEl) fileTypeEl.textContent = file.type || '알 수 없음';
                    
                    // 파일 크기 포맷
                    if (fileSizeEl) {
                        const formatFileSize = function(bytes) {
                            if (bytes === 0) return '0 Bytes';
                            const k = 1024;
                            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                            const i = Math.floor(Math.log(bytes) / Math.log(k));
                            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
                        };
                        
                        fileSizeEl.textContent = formatFileSize(file.size);
                    }
                    
                    // 파일 크기 제한 확인
                    if (file.size > 5000000) { // 5MB
                        alert('파일 크기가 너무 큽니다. 5MB 이하의 파일만 QR 코드로 변환할 수 있습니다.');
                        fileInput.value = ''; // 입력 초기화
                        if (fileInfoEl) fileInfoEl.classList.add('hidden');
                    }
                }
            });
        }
    });
    </script>
</body>
</html> 